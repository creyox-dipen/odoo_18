<?xml version="1.0" encoding="UTF-8" ?>
<odoo>

    <record id="inherit_account_journal_form_view_id_statements" model="ir.ui.view">
        <field name="name">inherit.account.journal.form.statements</field>
        <field name="model">account.journal</field>
        <field name="inherit_id" ref="account.view_account_journal_form"/>
        <field name="arch" type="xml">
            <xpath expr="//div[@name='button_box']/button[@class='oe_stat_button']" position="after">
                <button icon="fa-download" type="object" name="action_fetch_transactions">
                    <div class="o_stat_info">
                        <span class="o_stat_text">Fetch Transactions</span>
                    </div>
                </button>
            </xpath>

            <xpath expr="//group[@name='bank_account_number']" position="after">
                <group string="Stripe">
                    <field name="cron_name"/>
                    <field name="is_active_cron" widget="boolean_toggle"/>
                    <field name="statement_type"/>
                    <field name="next_exe_date"/>
                    <field name="last_fetch"/>
                </group>
            </xpath>
        </field>
    </record>

    <record id="fetch_stripe_transactions_cron_id" model="ir.cron">
        <field name="name">Fetch Stripe Transactions Cron</field>
        <field name="model_id" ref="model_account_journal"/>
        <field name="state">code</field>
        <field name="code">model.cron_fetch_transactions()</field>
        <field name="user_id" ref="base.user_root"/>
        <field name="interval_number">1</field>
        <field name="interval_type">days</field>
    </record>
</odoo>